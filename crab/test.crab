// SAMPLE SYNTAX

include "obj/num.crab"
include "obj/str.crab"
include "obj/umap.crab"

const Num INIT_VAL = 10

Num n = 0
Str s = "name"

abstract obj Thing:
  virtual fn validate()

obj Val : Num:
  Str name
  Val():
    this = n
    name = s
  Val(Num _n):
    Val()
    this = _n
  virtual operator++():
    this += 1
    return this
  virtual fn validate():
    Num::validate()
    assert(den == 1 && this >= 0, "Val has invalid value")
  const virtual fn str():
    return Num::str()

template obj Graph<T>:
  obj Node:
    T val
    Node&[] links
  Umap<Node> nodes

Val v(INIT_VAL)
v = 20

Val& vr = v
Val[] va = {v, vr}

for Num i in [0, 10]:
  ++v
  ++i
printl(va)

while v < 40:
  ++v
printl(va)

while true:
  if v < 50:
    continue
  if v == 50:
    break
printl(va)
